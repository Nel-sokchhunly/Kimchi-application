"use strict";var VERBOSE_DEBUG=!1,SAFARI=!1,OPERA=navigator.userAgent.indexOf("OPR")>-1,logging=function(e){window.log=function(){}};logging(!1);var loggingEnable=!1,onReady=function(e){"complete"===document.readyState?window.setTimeout(e,0):window.addEventListener("load",e,!1)};onReady((function(){"function"==typeof run_bandaids&&run_bandaids()}));var translate=function(e,t){if(Array.isArray(t))for(var n=0;n<t.length;n++)"string"!=typeof t[n]&&(t[n]=t[n].toString());else t&&"string"!=typeof t&&(t=t.toString());return chrome.i18n.getMessage(e,t)},splitMessageWithReplacementText=function(e,t){var n=e.indexOf("[["),a=e.indexOf("]]");if(-1===n||-1===a)return log("replacement tag not found",t,e,n,a),{error:"no brackets found"};var r={};return r.anchorPrefixText=e.substring(0,n),r.anchorText=e.substring(n+2,a),r.anchorPostfixText=e.substring(a+2),r},localizePage=function(){$("[i18n]:not(.i18n-replaced, [i18n_replacement_el])").each((function(){$(this).text(translate($(this).attr("i18n")))})),$("[i18n_value]:not(.i18n-replaced)").each((function(){$(this).val(translate($(this).attr("i18n_value")))})),$("[i18n_title]:not(.i18n-replaced)").each((function(){$(this).attr("title",translate($(this).attr("i18n_title")))})),$("[i18n_placeholder]:not(.i18n-replaced)").each((function(){$(this).attr("placeholder",translate($(this).attr("i18n_placeholder")))})),$("[i18n_replacement_el]:not(.i18n-replaced)").each((function(){var e=$(this).attr("i18n");if(e&&"string"==typeof e)if($(this).get(0).firstChild)if($(this).get(0).lastChild){var t="#"+$(this).attr("i18n_replacement_el");if(0!==$(t).length){var n=chrome.i18n.getMessage(e)||"",a=splitMessageWithReplacementText(n,e);$(this).get(0).firstChild.nodeValue=a.anchorPrefixText,$(this).get(0).lastChild.nodeValue=a.anchorPostfixText,"INPUT"===$(t).get(0).tagName?$("#"+$(this).attr("i18n_replacement_el")).prop("value",a.anchorText):$("#"+$(this).attr("i18n_replacement_el")).text(a.anchorText),$(this).addClass("i18n-replaced")}else log("returning, no child element found",$(this).attr("i18n"),t)}else log("returning, no last child found",$(this).attr("i18n"));else log("returning, no first child found",$(this).attr("i18n"));else $(this).addClass("i18n-replaced")}));var e=determineUserLanguage();"ar"!==e&&"he"!==e||($("#main_nav").removeClass("right").addClass("left"),$(".adblock-logo").removeClass("left").addClass("right"),$(".closelegend").css("float","left"),document.documentElement.dir="rtl")},determineUserLanguage=function(){return void 0!==navigator.language&&navigator.language?navigator.language.match(/^[a-z]+/i)[0]:null},parseUri=function(e){for(var t=/^(([^:]+(?::|$))(?:(?:\w+:)?\/\/)?(?:[^:@\/]*(?::[^:@\/]*)?@)?(([^:\/?#]*)(?::(\d*))?))((?:[^?#\/]*\/)*[^?#]*)(\?[^#]*)?(\#.*)?/.exec(e),n=["href","origin","protocol","host","hostname","port","pathname","search","hash"],a={},r=0;t&&r<n.length;r++)a[n[r]]=t[r]||"";return a};parseUri.parseSearch=function(e){e=e.substring(e.indexOf("?")+1).split("&");for(var t,n={},a=0;a<e.length;a++)(t=e[a].split("="))[0]&&!t[1]&&(t[1]=""),(n[decodeURIComponent(t[0])]||"undefined"!==decodeURIComponent(t[1]))&&(n[decodeURIComponent(t[0])]=decodeURIComponent(t[1]));return n},parseUri.secondLevelDomainOnly=function(e,t){return e?(e.match(/([^\.]+\.(?:co\.)?[^\.]+)\.?$/)||[e,e])[t?0:1].toLowerCase():e};var sessionstorage_get=function(e){var t=sessionStorage.getItem(e);if(null!=t)try{return JSON.parse(t)}catch(t){return void log("Couldn't parse json for "+e)}},sessionstorage_set=function(e,t){if(void 0!==t)try{sessionStorage.setItem(e,JSON.stringify(t))}catch(e){"QUOTA_EXCEEDED_ERR"!=e.name||SAFARI||(alert(translate("storage_quota_exceeded")),openTab("options/index.html#ui-tabs-2"))}else sessionStorage.removeItem(e)},BGcall=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);var n=e.shift(),a="function"==typeof e[e.length-1],r=a?e.pop():function(){};ext.backgroundPage.sendMessage({command:"call",fn:n,args:e},r)};